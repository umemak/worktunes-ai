# WorkTunes AI - é–‹ç™ºå¼•ãç¶™ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## ğŸ“… ä½œæ¥­æ—¥æ™‚
**ä½œæˆæ—¥**: 2025å¹´11æœˆ13æ—¥  
**å¼•ãç¶™ãå…ˆ**: AI Developer  

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
æ™‚é–“å¸¯ãƒ»å¤©æ°—é€£å‹•å‹ä½œæ¥­ç”¨BGMç”Ÿæˆã‚µãƒ¼ãƒ“ã‚¹ã€ŒWorkTunes AIã€ã®é–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

## âœ… å®Œäº†æ¸ˆã¿ä½œæ¥­

### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºç›¤æ§‹ç¯‰
- [x] Next.js 14 + TypeScript ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨­å®š
- [x] Express.js + TypeScript ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¨­å®š
- [x] Monorepoæ§‹æˆï¼ˆapps/web, apps/api, packages/*ï¼‰
- [x] Docker Composeç’°å¢ƒè¨­å®š
- [x] Git ãƒªãƒã‚¸ãƒˆãƒªåˆæœŸåŒ–ãƒ»GitHubé€£æºæº–å‚™

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ
- [x] Prisma ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆå®Œäº†
- [x] ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆusers, user_profilesï¼‰
- [x] BGMé–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆgenerated_bgm, playlists, playlist_tracksï¼‰
- [x] ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£è¿½è·¡ï¼ˆuser_activityï¼‰
- [x] èªè¨¼ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ†ãƒ¼ãƒ–ãƒ«

### 3. å‹å®šç¾©ã‚·ã‚¹ãƒ†ãƒ 
- [x] Zodãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãå®Œå…¨å‹å®šç¾©
- [x] API ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‹
- [x] ç’°å¢ƒãƒ‡ãƒ¼ã‚¿å‹ï¼ˆEnvironmentDataï¼‰
- [x] BGMç”Ÿæˆå‹ï¼ˆBGMRequest/BGMResponseï¼‰
- [x] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å‹

### 4. APIè¨­è¨ˆ
- [x] RESTful ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¨­è¨ˆ
- [x] èªè¨¼ãƒ•ãƒ­ãƒ¼ï¼ˆJWT + Refresh Tokenï¼‰
- [x] BGMç”ŸæˆAPIæ§‹é€ 
- [x] ç’°å¢ƒãƒ‡ãƒ¼ã‚¿APIæ§‹é€ 
- [x] ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆç®¡ç†APIæ§‹é€ 

### 5. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰åŸºç›¤
- [x] Next.js 14 App Routeræ§‹æˆ
- [x] Tailwind CSS + Shadcn/uiè¨­å®š
- [x] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³åŸºç›¤
- [x] éŸ³æ¥½ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç”¨CSS
- [x] ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆéª¨æ ¼

## ğŸ”„ ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 
```
worktunes-ai/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                     # Next.js ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx         âœ… å®Œäº†
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx       âœ… å®Œäº†
â”‚   â”‚   â”‚   â””â”€â”€ globals.css      âœ… å®Œäº†
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ MainInterface.tsx âš ï¸ éª¨æ ¼ã®ã¿
â”‚   â”‚   â””â”€â”€ package.json         âœ… å®Œäº†
â”‚   â””â”€â”€ api/                     # Express.js ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â””â”€â”€ server.ts        âš ï¸ åŸºæœ¬æ§‹é€ ã®ã¿
â”‚       â”œâ”€â”€ prisma/
â”‚       â”‚   â””â”€â”€ schema.prisma    âœ… å®Œäº†
â”‚       â””â”€â”€ package.json         âœ… å®Œäº†
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ types/
â”‚       â””â”€â”€ index.ts             âœ… å®Œäº†ï¼ˆåŒ…æ‹¬çš„å‹å®šç¾©ï¼‰
â”œâ”€â”€ docker-compose.yml           âœ… å®Œäº†
â”œâ”€â”€ README.md                    âœ… å®Œäº†
â””â”€â”€ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å„ç¨®             âœ… å®Œäº†
```

## ğŸ¯ æ¬¡æœŸå®Ÿè£…å„ªå…ˆé †ä½

### Phase 1: ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…ï¼ˆæœ€å„ªå…ˆï¼‰

#### 1. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIå®Ÿè£…
**ãƒ•ã‚¡ã‚¤ãƒ«**: `apps/api/src/`

```typescript
// å®Ÿè£…å¿…è¦ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ auth.ts          // ğŸ”´ æœ€å„ªå…ˆ: JWTèªè¨¼
â”‚   â”œâ”€â”€ bgm.ts           // ğŸ”´ æœ€å„ªå…ˆ: BGMç”ŸæˆAPI
â”‚   â”œâ”€â”€ environment.ts   // ğŸŸ¡ å„ªå…ˆ: å¤©æ°—ãƒ»æ™‚é–“å¸¯API
â”‚   â”œâ”€â”€ user.ts         // ğŸŸ¡ å„ªå…ˆ: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
â”‚   â””â”€â”€ playlist.ts     // ğŸŸ¢ å¾Œå›ã—: ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆ
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ musicGenerator.ts    // ğŸ”´ æœ€å„ªå…ˆ: ElevenLabsçµ±åˆ
â”‚   â”œâ”€â”€ weatherService.ts    // ğŸŸ¡ å„ªå…ˆ: OpenWeatherMapçµ±åˆ
â”‚   â””â”€â”€ authService.ts       // ğŸ”´ æœ€å„ªå…ˆ: èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ auth.ts             // ğŸ”´ æœ€å„ªå…ˆ: JWTæ¤œè¨¼
â”‚   â”œâ”€â”€ errorHandler.ts     // ğŸŸ¡ å„ªå…ˆ: ã‚¨ãƒ©ãƒ¼å‡¦ç†
â”‚   â””â”€â”€ validation.ts       // ğŸŸ¡ å„ªå…ˆ: ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¤œè¨¼
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ database.ts         // ğŸ”´ æœ€å„ªå…ˆ: DBæ¥ç¶š
â”‚   â””â”€â”€ redis.ts           // ğŸŸ¡ å„ªå…ˆ: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ¥ç¶š
â””â”€â”€ utils/
    â””â”€â”€ logger.ts          // ğŸŸ¡ å„ªå…ˆ: ãƒ­ã‚°æ©Ÿèƒ½
```

#### 2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
**ãƒ•ã‚¡ã‚¤ãƒ«**: `apps/web/components/`

```typescript
// å®Ÿè£…å¿…è¦ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ EnvironmentCard.tsx      // ğŸ”´ æœ€å„ªå…ˆ: å¤©æ°—ãƒ»æ™‚é–“è¡¨ç¤º
â”œâ”€â”€ MusicPlayer.tsx          // ğŸ”´ æœ€å„ªå…ˆ: éŸ³æ¥½ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
â”œâ”€â”€ GenerationControls.tsx   // ğŸ”´ æœ€å„ªå…ˆ: BGMç”ŸæˆUI
â”œâ”€â”€ RecentGenerations.tsx    // ğŸŸ¡ å„ªå…ˆ: å±¥æ­´è¡¨ç¤º
â”œâ”€â”€ Header.tsx              // ğŸŸ¡ å„ªå…ˆ: ãƒ˜ãƒƒãƒ€ãƒ¼ãƒŠãƒ“
â”œâ”€â”€ auth/
â”‚   â””â”€â”€ LoginDialog.tsx     // ğŸ”´ æœ€å„ªå…ˆ: ãƒ­ã‚°ã‚¤ãƒ³UI
â”œâ”€â”€ ui/                     // ğŸŸ¡ å„ªå…ˆ: åŸºæœ¬UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ button.tsx
â”‚   â”œâ”€â”€ dialog.tsx
â”‚   â”œâ”€â”€ toaster.tsx
â”‚   â””â”€â”€ progress.tsx
â””â”€â”€ Providers.tsx           // ğŸ”´ æœ€å„ªå…ˆ: çŠ¶æ…‹ç®¡ç†ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
```

#### 3. çŠ¶æ…‹ç®¡ç†å®Ÿè£…
**ãƒ•ã‚¡ã‚¤ãƒ«**: `apps/web/store/`

```typescript
// å®Ÿè£…å¿…è¦ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ authStore.ts         // ğŸ”´ æœ€å„ªå…ˆ: èªè¨¼çŠ¶æ…‹
â”œâ”€â”€ musicStore.ts        // ğŸ”´ æœ€å„ªå…ˆ: éŸ³æ¥½å†ç”ŸçŠ¶æ…‹
â”œâ”€â”€ environmentStore.ts  // ğŸ”´ æœ€å„ªå…ˆ: ç’°å¢ƒãƒ‡ãƒ¼ã‚¿çŠ¶æ…‹
â””â”€â”€ playlistStore.ts     // ğŸŸ¢ å¾Œå›ã—: ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆçŠ¶æ…‹
```

## ğŸ”§ æŠ€è¡“ä»•æ§˜è©³ç´°

### å¤–éƒ¨APIçµ±åˆä»•æ§˜

#### ElevenLabs Music API
```typescript
// éŸ³æ¥½ç”Ÿæˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¾‹
const generateMusicParams = {
  text: "focus background music for morning with sunny weather, instrumental, ambient, no lyrics, seamless loop",
  duration_seconds: 180,
  model_id: "eleven_music_v1"
};

// APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
POST https://api.elevenlabs.io/v1/music/generate
Authorization: Bearer ${ELEVENLABS_API_KEY}
```

#### OpenWeatherMap API
```typescript
// å¤©æ°—ãƒ‡ãƒ¼ã‚¿å–å¾—ä¾‹
const weatherParams = {
  lat: 35.6762,
  lon: 139.6503,
  appid: OPENWEATHER_API_KEY,
  units: 'metric'
};

// APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
GET https://api.openweathermap.org/data/2.5/weather
```

### ç’°å¢ƒãƒãƒƒãƒ”ãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯
```typescript
// å®Ÿè£…å¿…è¦: apps/api/src/services/environmentMapper.ts
const environmentMoodMap = {
  morning: {
    sunny: {
      mood: 'uplifting',
      instruments: ['piano', 'acoustic_guitar', 'strings'],
      bpmRange: [90, 120],
      key: ['C', 'G', 'D'],
      energy: 'medium-high'
    },
    // ... ãã®ä»–ã®çµ„ã¿åˆã‚ã›
  }
};
```

## ğŸš€ AI Developerå‘ã‘æŒ‡ç¤º

### é–‹å§‹æ™‚ã®æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
1. **èªè¨¼APIå®Ÿè£…**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ç™»éŒ²æ©Ÿèƒ½
2. **ç’°å¢ƒãƒ‡ãƒ¼ã‚¿å–å¾—**: OpenWeatherMapçµ±åˆ
3. **BGMç”Ÿæˆ**: ElevenLabsçµ±åˆ
4. **åŸºæœ¬UI**: ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ¡ã‚¤ãƒ³ç”»é¢
5. **éŸ³æ¥½ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼**: å†ç”Ÿãƒ»åˆ¶å¾¡æ©Ÿèƒ½

### å®Ÿè£…æ™‚ã®é‡è¦ãƒã‚¤ãƒ³ãƒˆ
- **å‹å®‰å…¨æ€§**: `packages/types`ã®å‹å®šç¾©ã‚’å³å¯†ã«ä½¿ç”¨
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: å¤–éƒ¨APIå¤±æ•—æ™‚ã®é©åˆ‡ãªå‡¦ç†
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥**: Redisä½¿ç”¨ã§å¿œç­”é€Ÿåº¦å‘ä¸Š
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œå¿…é ˆ
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: JWTèªè¨¼ãƒ»CORSãƒ»Rate Limiting

### ç’°å¢ƒå¤‰æ•°è¨­å®š
```env
# å¿…è¦ãªAPI Key
ELEVENLABS_API_KEY="your_key_here"
OPENWEATHER_API_KEY="your_key_here"
JWT_SECRET="your_secret_here"
DATABASE_URL="postgresql://..."
REDIS_URL="redis://localhost:6379"
```

## ğŸ“‹ ãƒ†ã‚¹ãƒˆè¦ä»¶
- **å˜ä½“ãƒ†ã‚¹ãƒˆ**: Jest + Supertest
- **API ãƒ†ã‚¹ãƒˆ**: å„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å‹•ä½œç¢ºèª
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é€£æº
- **E2E ãƒ†ã‚¹ãƒˆ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼å…¨ä½“

## ğŸ³ é–‹ç™ºç’°å¢ƒ
```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# Dockerç’°å¢ƒ
docker-compose up -d

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
npx prisma migrate dev
npx prisma studio
```

## ğŸ“– å‚è€ƒè³‡æ–™
- è©³ç´°ä»•æ§˜æ›¸: `bgm_service_specification.md`
- APIä»•æ§˜: RESTfulè¨­è¨ˆã«æº–æ‹ 
- UIè¨­è¨ˆ: Shadcn/ui + Tailwind CSS

---

**ğŸµ ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚è€ƒã«ã€WorkTunes AIã®æœ¬æ ¼å®Ÿè£…ã‚’é–‹å§‹ã—ã¦ãã ã•ã„ï¼**